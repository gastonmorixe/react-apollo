"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}function makeEmptyFunction(t){return function(){return t}}var emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(t){return t};var emptyFunction_1=emptyFunction,validateFormat=function(t){};function invariant(t,e,r,n,o,i,a,s){if(validateFormat(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,i,a,s],p=0;(c=new Error(e.replace(/%s/g,function(){return u[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}var invariant_1=invariant,getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function shouldUseNative(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}var objectAssign=shouldUseNative()?Object.assign:function(t,e){for(var r,n,o=toObject(t),i=1;i<arguments.length;i++){for(var a in r=Object(arguments[i]))hasOwnProperty.call(r,a)&&(o[a]=r[a]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(r);for(var s=0;s<n.length;s++)propIsEnumerable.call(r,n[s])&&(o[n[s]]=r[n[s]])}}return o},ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret,factoryWithThrowingShims=function(){function t(t,e,r,n,o,i){i!==ReactPropTypesSecret_1&&invariant_1(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var r={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return r.checkPropTypes=emptyFunction_1,r.PropTypes=r,r},propTypes=createCommonjsModule(function(t){t.exports=factoryWithThrowingShims()}),invariant$2=function(t,e,r,n,o,i,a,s){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,i,a,s],p=0;(c=new Error(e.replace(/%s/g,function(){return u[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},invariant_1$1=invariant$2,hasOwnProperty$1=Object.prototype.hasOwnProperty;function is(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function shallowEqual(t,e){if(is(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!hasOwnProperty$1.call(e,r[o])||!is(t[r[o]],e[r[o]]))return!1;return!0}var shallowEqual_1=shallowEqual,hoistNonReactStatics=createCommonjsModule(function(t,e){var r,n,o,i,a,s,c,u;t.exports=(r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,u=c&&c(Object),function t(e,p,l){if("string"!=typeof p){if(u){var f=c(p);f&&f!==u&&t(e,f,l)}var y=i(p);a&&(y=y.concat(a(p)));for(var h=0;h<y.length;++h){var b=y[h];if(!(r[b]||n[b]||l&&l[b])){var d=s(p,b);try{o(e,b,d)}catch(t){}}}return e}return e})});function isObject(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var isObject_1=isObject,objectCreate=Object.create,baseCreate=function(){function t(){}return function(e){if(!isObject_1(e))return{};if(objectCreate)return objectCreate(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),_baseCreate=baseCreate;function baseLodash(){}var _baseLodash=baseLodash;function LodashWrapper(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}LodashWrapper.prototype=_baseCreate(_baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper;var _LodashWrapper=LodashWrapper;function arrayPush(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var _arrayPush=arrayPush,freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto=Object.prototype,hasOwnProperty$2=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(t){var e=hasOwnProperty$2.call(t,symToStringTag),r=t[symToStringTag];try{t[symToStringTag]=void 0}catch(t){}var n=nativeObjectToString.call(t);return e?t[symToStringTag]=r:delete t[symToStringTag],n}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(t){return nativeObjectToString$1.call(t)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(t){return null==t?void 0===t?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(t)?_getRawTag(t):_objectToString(t)}var _baseGetTag=baseGetTag;function isObjectLike(t){return null!=t&&"object"==typeof t}var isObjectLike_1=isObjectLike,argsTag="[object Arguments]";function baseIsArguments(t){return isObjectLike_1(t)&&_baseGetTag(t)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(t){return isObjectLike_1(t)&&hasOwnProperty$3.call(t,"callee")&&!propertyIsEnumerable.call(t,"callee")},isArguments_1=isArguments,isArray=Array.isArray,isArray_1=isArray,spreadableSymbol=_Symbol?_Symbol.isConcatSpreadable:void 0;function isFlattenable(t){return isArray_1(t)||isArguments_1(t)||!!(spreadableSymbol&&t&&t[spreadableSymbol])}var _isFlattenable=isFlattenable;function baseFlatten(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=_isFlattenable),o||(o=[]);++i<a;){var s=t[i];e>0&&r(s)?e>1?baseFlatten(s,e-1,r,n,o):_arrayPush(o,s):n||(o[o.length]=s)}return o}var _baseFlatten=baseFlatten;function flatten(t){return(null==t?0:t.length)?_baseFlatten(t,1):[]}var flatten_1=flatten;function apply(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var _apply=apply,nativeMax=Math.max;function overRest(t,e,r){return e=nativeMax(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=nativeMax(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=n[o];return s[e]=r(a),_apply(t,this,s)}}var _overRest=overRest;function constant(t){return function(){return t}}var constant_1=constant,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(t){if(!isObject_1(t))return!1;var e=_baseGetTag(t);return e==funcTag||e==genTag||e==asyncTag||e==proxyTag}var isFunction_1=isFunction,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=function(){var t=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(t){if(null!=t){try{return funcToString.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$3=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$4=objectProto$3.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$4).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){return!(!isObject_1(t)||_isMasked(t))&&(isFunction_1(t)?reIsNative:reIsHostCtor).test(_toSource(t))}var _baseIsNative=baseIsNative;function getValue(t,e){return null==t?void 0:t[e]}var _getValue=getValue;function getNative(t,e){var r=_getValue(t,e);return _baseIsNative(r)?r:void 0}var _getNative=getNative,defineProperty=function(){try{var t=_getNative(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),_defineProperty=defineProperty;function identity(t){return t}var identity_1=identity,baseSetToString=_defineProperty?function(t,e){return _defineProperty(t,"toString",{configurable:!0,enumerable:!1,value:constant_1(e),writable:!0})}:identity_1,_baseSetToString=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(t){var e=0,r=0;return function(){var n=nativeNow(),o=HOT_SPAN-(n-r);if(r=n,o>0){if(++e>=HOT_COUNT)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var _shortOut=shortOut,setToString=_shortOut(_baseSetToString),_setToString=setToString;function flatRest(t){return _setToString(_overRest(t,void 0,flatten_1),t+"")}var _flatRest=flatRest,WeakMap=_getNative(_root,"WeakMap"),_WeakMap=WeakMap,metaMap=WeakMap&&new WeakMap,_metaMap=metaMap;function noop(){}var noop_1=noop,getData=_metaMap?function(t){return _metaMap.get(t)}:noop_1,_getData=getData,realNames={},_realNames=realNames,objectProto$4=Object.prototype,hasOwnProperty$5=objectProto$4.hasOwnProperty;function getFuncName(t){for(var e=t.name+"",r=_realNames[e],n=hasOwnProperty$5.call(_realNames,e)?r.length:0;n--;){var o=r[n],i=o.func;if(null==i||i==t)return o.name}return e}var _getFuncName=getFuncName,MAX_ARRAY_LENGTH=4294967295;function LazyWrapper(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}LazyWrapper.prototype=_baseCreate(_baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper;var _LazyWrapper=LazyWrapper;function copyArray(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var _copyArray=copyArray;function wrapperClone(t){if(t instanceof _LazyWrapper)return t.clone();var e=new _LodashWrapper(t.__wrapped__,t.__chain__);return e.__actions__=_copyArray(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var _wrapperClone=wrapperClone,objectProto$5=Object.prototype,hasOwnProperty$6=objectProto$5.hasOwnProperty;function lodash(t){if(isObjectLike_1(t)&&!isArray_1(t)&&!(t instanceof _LazyWrapper)){if(t instanceof _LodashWrapper)return t;if(hasOwnProperty$6.call(t,"__wrapped__"))return _wrapperClone(t)}return new _LodashWrapper(t)}lodash.prototype=_baseLodash.prototype,lodash.prototype.constructor=lodash;var wrapperLodash=lodash;function isLaziable(t){var e=_getFuncName(t),r=wrapperLodash[e];if("function"!=typeof r||!(e in _LazyWrapper.prototype))return!1;if(t===r)return!0;var n=_getData(r);return!!n&&t===n[0]}var _isLaziable=isLaziable,FUNC_ERROR_TEXT="Expected a function",WRAP_CURRY_FLAG=8,WRAP_PARTIAL_FLAG=32,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256;function createFlow(t){return _flatRest(function(e){var r=e.length,n=r,o=_LodashWrapper.prototype.thru;for(t&&e.reverse();n--;){var i=e[n];if("function"!=typeof i)throw new TypeError(FUNC_ERROR_TEXT);if(o&&!a&&"wrapper"==_getFuncName(i))var a=new _LodashWrapper([],!0)}for(n=a?n:r;++n<r;){i=e[n];var s=_getFuncName(i),c="wrapper"==s?_getData(i):void 0;a=c&&_isLaziable(c[0])&&c[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!c[4].length&&1==c[9]?a[_getFuncName(c[0])].apply(a,c[3]):1==i.length&&_isLaziable(i)?a[s]():a.thru(i)}return function(){var t=arguments,n=t[0];if(a&&1==t.length&&isArray_1(n))return a.plant(n).value();for(var o=0,i=r?e[o].apply(this,t):n;++o<r;)i=e[o].call(this,i);return i}})}var _createFlow=createFlow,flowRight=_createFlow(!0),flowRight_1=flowRight,reactApollo_browser_umd=createCommonjsModule(function(t,e){!function(t,e,r,n){function o(t,r,n){if(Array.isArray(t))t.forEach(function(t){return o(t,r,n)});else if(t)if(function(t){return!!t.type}(t))if("function"==typeof t.type){var i=t.type,a=Object.assign({},i.defaultProps,function(t){return t.props||t.attributes}(t)),s=r,c=void 0;if(function(t){return t.prototype&&(t.prototype.render||t.prototype.isReactComponent)}(i)){var u=new i(a,r);if(u.props=u.props||a,u.context=u.context||r,u.state=u.state||null,u.setState=function(t){"function"==typeof t&&(t=t(u.state,u.props,u.context)),u.state=Object.assign({},u.state,t)},u.componentWillMount&&u.componentWillMount(),u.getChildContext&&(s=Object.assign({},r,u.getChildContext())),!1===n(t,u,r,s))return;c=u.render()}else{if(!1===n(t,null,r))return;c=i(a,r)}c&&(Array.isArray(c)?c.forEach(function(t){return o(t,s,n)}):o(c,s,n))}else{if(!1===n(t,null,r))return;t.props&&t.props.children&&e.Children.forEach(t.props.children,function(t){t&&o(t,r,n)})}else"string"!=typeof t&&"number"!=typeof t||n(t,null,r)}var i=invariant_1$1,a=function(t,e){return i(!!e.client,'Could not find "client" in the context of ApolloConsumer. Wrap the root component in an <ApolloProvider>'),t.children(e.client)};a.contextTypes={client:r.object.isRequired},a.propTypes={children:r.func.isRequired};var s,c,u=(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=invariant_1$1,l=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.operations=new Map,p(e.client,'ApolloClient was not passed a client instance. Make sure you pass in your client via the "client" prop.'),e.client.__operations_cache__||(e.client.__operations_cache__=n.operations),n}return u(e,t),e.prototype.getChildContext=function(){return{client:this.props.client,operations:this.props.client.__operations_cache__}},e.prototype.render=function(){return this.props.children},e.propTypes={client:r.object.isRequired,children:r.element.isRequired},e.childContextTypes={client:r.object.isRequired,operations:r.object},e}(e.Component),f=invariant_1$1;!function(t){t[t.Query=0]="Query",t[t.Mutation=1]="Mutation",t[t.Subscription=2]="Subscription"}(s||(s={}));var y=new Map;function h(t){var e,r,n=y.get(t);if(n)return n;f(!!t&&!!t.kind,"Argument of "+t+" passed to parser was not a valid GraphQL DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document");var o=t.definitions.filter(function(t){return"FragmentDefinition"===t.kind}),i=t.definitions.filter(function(t){return"OperationDefinition"===t.kind&&"query"===t.operation}),a=t.definitions.filter(function(t){return"OperationDefinition"===t.kind&&"mutation"===t.operation}),c=t.definitions.filter(function(t){return"OperationDefinition"===t.kind&&"subscription"===t.operation});f(!o.length||i.length||a.length||c.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"),f(i.length+a.length+c.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+t+" had "+i.length+" queries, "+c.length+" subscriptions and "+a.length+" mutations. You can use 'compose' to join multiple operation types to a component"),r=i.length?s.Query:s.Mutation,i.length||a.length||(r=s.Subscription);var u=i.length?i:a.length?a:c;f(1===u.length,"react-apollo only supports one defintion per HOC. "+t+" had "+u.length+" definitions. You can use 'compose' to join multiple operation types to a component");var p=u[0];e=p.variableDefinitions||[];var l={name:p.name&&"Name"===p.name.kind?p.name.value:"data",type:r,variables:e};return y.set(t,l),l}var b=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),d=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},v=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r},_=shallowEqual_1,g=invariant_1$1,m=function(t){function e(e,r){var o=t.call(this,e,r)||this;return o.previousData={},o.startQuerySubscription=function(){if(!o.querySubscription){var t=o.getQueryResult();o.querySubscription=o.queryObservable.subscribe({next:function(){t&&7===t.networkStatus?t=void 0:o.updateCurrentData()},error:function(t){if(o.resubscribeToQuery(),!t.hasOwnProperty("graphQLErrors"))throw t;o.updateCurrentData()}})}},o.removeQuerySubscription=function(){o.querySubscription&&(o.querySubscription.unsubscribe(),delete o.querySubscription)},o.updateCurrentData=function(){o.hasMounted&&o.forceUpdate()},o.getQueryResult=function(){var t,e={data:Object.create(null)};Object.assign(e,{variables:(t=o.queryObservable).variables,refetch:t.refetch.bind(t),fetchMore:t.fetchMore.bind(t),updateQuery:t.updateQuery.bind(t),startPolling:t.startPolling.bind(t),stopPolling:t.stopPolling.bind(t),subscribeToMore:t.subscribeToMore.bind(t)});var r=o.queryObservable.currentResult(),i=r.loading,a=r.networkStatus,s=r.errors,c=r.error;if(s&&s.length>0&&(c=new n.ApolloError({graphQLErrors:s})),Object.assign(e,{loading:i,networkStatus:a,error:c}),i?Object.assign(e.data,o.previousData,r.data):c?Object.assign(e,{data:(o.queryObservable.getLastResult()||{}).data}):(Object.assign(e.data,r.data),o.previousData=r.data),!o.querySubscription){var u=e.refetch;e.refetch=function(t){return o.querySubscription?u(t):new Promise(function(e,r){o.refetcherQueue={resolve:e,reject:r,args:t}})}}return e.client=o.client,e},o.client=e.client||r.client,g(!!o.client,'Could not find "client" in the context of Query or as passed props. Wrap the root component in an <ApolloProvider>'),o.initializeQueryObservable(e),o}return b(e,t),e.prototype.fetchData=function(){if(this.props.skip)return!1;var t=this.props,e=(t.children,t.ssr),r=(t.displayName,t.skip,t.client,v(t,["children","ssr","displayName","skip","client"])),n=r.fetchPolicy;if(!1===e)return!1;"network-only"!==n&&"cache-and-network"!==n||(n="cache-first");var o=this.client.watchQuery(d({},r,{fetchPolicy:n})),i=this.queryObservable.currentResult();return!!i.loading&&o.result()},e.prototype.componentDidMount=function(){if(this.hasMounted=!0,!this.props.skip&&(this.startQuerySubscription(),this.refetcherQueue)){var t=this.refetcherQueue,e=t.args,r=t.resolve,n=t.reject;this.queryObservable.refetch(e).then(r).catch(n)}},e.prototype.componentWillReceiveProps=function(t,e){if(!t.skip||this.props.skip){var r=t.client;(!_(this.props,t)||this.client!==r&&this.client!==e.client)&&(this.client!==r&&this.client!==e.client&&(this.client=r||e.client,this.removeQuerySubscription(),this.queryObservable=null,this.previousData={},this.updateQuery(t)),this.props.query!==t.query&&this.removeQuerySubscription(),this.updateQuery(t),t.skip||this.startQuerySubscription())}else this.removeQuerySubscription()},e.prototype.componentWillUnmount=function(){this.removeQuerySubscription(),this.hasMounted=!1},e.prototype.render=function(){var t=this.props.children,e=this.getQueryResult();return t(e)},e.prototype.extractOptsFromProps=function(t){var e,r=t.variables,n=t.pollInterval,o=t.fetchPolicy,i=t.errorPolicy,a=t.notifyOnNetworkStatusChange,c=t.query,u=t.displayName,p=void 0===u?"Query":u,l=t.context,f=void 0===l?{}:l;return this.operation=h(c),g(this.operation.type===s.Query,"The <Query /> component requires a graphql query, but got a "+(this.operation.type===s.Mutation?"mutation":"subscription")+"."),e={variables:r,pollInterval:n,query:c,fetchPolicy:o,errorPolicy:i,notifyOnNetworkStatusChange:a,metadata:{reactComponent:{displayName:p}},context:f},Object.keys(e).reduce(function(t,r){return void 0!==e[r]&&(t[r]=e[r]),t},{})},e.prototype.initializeQueryObservable=function(t){var e=this.extractOptsFromProps(t);this.context.operations&&this.context.operations.set(this.operation.name,{query:e.query,variables:e.variables}),this.queryObservable=this.client.watchQuery(e)},e.prototype.updateQuery=function(t){this.queryObservable||this.initializeQueryObservable(t),this.queryObservable.setOptions(this.extractOptsFromProps(t)).catch(function(){return null})},e.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var t=this.queryObservable.getLastError(),e=this.queryObservable.getLastResult();this.queryObservable.resetLastResults(),this.startQuerySubscription(),Object.assign(this.queryObservable,{lastError:t,lastResult:e})},e.contextTypes={client:r.object.isRequired,operations:r.object},e.propTypes={children:r.func.isRequired,fetchPolicy:r.string,notifyOnNetworkStatusChange:r.bool,pollInterval:r.number,query:r.object.isRequired,variables:r.object,ssr:r.bool},e}(e.Component),O=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),j=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},w=invariant_1$1,P=shallowEqual_1,S={loading:!1,called:!1,error:void 0,data:void 0},T=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.runMutation=function(t){void 0===t&&(t={}),n.onStartMutation();var e=n.generateNewMutationId();return n.mutate(t).then(function(t){return n.onCompletedMutation(t,e),t}).catch(function(t){if(n.onMutationError(t,e),!n.props.onError)throw t})},n.mutate=function(t){var e=n.props,r=e.mutation,o=e.variables,i=e.optimisticResponse,a=e.update,s=e.context,c=void 0===s?{}:s,u=t.refetchQueries||n.props.refetchQueries;return u&&u.length&&Array.isArray(u)&&(u=u.map(function(t){return"string"==typeof t&&n.context.operations&&n.context.operations.get(t)||t}),delete t.refetchQueries),n.client.mutate(j({mutation:r,variables:o,optimisticResponse:i,refetchQueries:u,update:a,context:c},t))},n.onStartMutation=function(){n.state.loading||n.props.ignoreResults||n.setState({loading:!0,error:void 0,data:void 0,called:!0})},n.onCompletedMutation=function(t,e){if(!1!==n.hasMounted){var r=n.props,o=r.onCompleted,i=r.ignoreResults,a=t.data,s=function(){return o?o(a):null};n.isMostRecentMutation(e)&&!i?n.setState({loading:!1,data:a},s):s()}},n.onMutationError=function(t,e){if(!1!==n.hasMounted){var r=n.props.onError,o=function(){return r?r(t):null};n.isMostRecentMutation(e)?n.setState({loading:!1,error:t},o):o()}},n.generateNewMutationId=function(){return n.mostRecentMutationId=n.mostRecentMutationId+1,n.mostRecentMutationId},n.isMostRecentMutation=function(t){return n.mostRecentMutationId===t},n.verifyDocumentIsMutation=function(t){var e=h(t);w(e.type===s.Mutation,"The <Mutation /> component requires a graphql mutation, but got a "+(e.type===s.Query?"query":"subscription")+".")},n.verifyContext=function(t){w(!!t.client,'Could not find "client" in the context of Mutation. Wrap the root component in an <ApolloProvider>')},n.verifyContext(r),n.client=r.client,n.verifyDocumentIsMutation(e.mutation),n.mostRecentMutationId=0,n.state=S,n}return O(e,t),e.prototype.componentDidMount=function(){this.hasMounted=!0},e.prototype.componentWillUnmount=function(){this.hasMounted=!1},e.prototype.componentWillReceiveProps=function(t,e){P(this.props,t)&&this.client===e.client||(this.props.mutation!==t.mutation&&this.verifyDocumentIsMutation(t.mutation),this.client!==e.client&&(this.client=e.client,this.setState(S)))},e.prototype.render=function(){var t=this.props.children,e=this.state,r=e.loading,n=e.data,o=e.error,i=e.called,a={called:i,loading:r,data:n,error:o};return t(this.runMutation,a)},e.contextTypes={client:r.object.isRequired,operations:r.object},e.propTypes={mutation:r.object.isRequired,variables:r.object,optimisticResponse:r.object,refetchQueries:r.oneOfType([r.arrayOf(r.string),r.arrayOf(r.object),r.func]),update:r.func,children:r.func.isRequired,onCompleted:r.func,onError:r.func},e}(e.Component),R=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),A=shallowEqual_1,M=invariant_1$1,C=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.initialize=function(t){n.queryObservable||(n.queryObservable=n.client.subscribe({query:t.subscription,variables:t.variables}))},n.startSubscription=function(){n.querySubscription||(n.querySubscription=n.queryObservable.subscribe({next:n.updateCurrentData,error:n.updateError}))},n.getInitialState=function(){return{loading:!0,error:void 0,data:void 0}},n.updateCurrentData=function(t){n.setState({data:t.data,loading:!1,error:void 0})},n.updateError=function(t){n.setState({error:t,loading:!1})},n.endSubscription=function(){n.querySubscription&&(n.querySubscription.unsubscribe(),delete n.querySubscription)},M(!!r.client,'Could not find "client" in the context of Subscription. Wrap the root component in an <ApolloProvider>'),n.client=r.client,n.initialize(e),n.state=n.getInitialState(),n}return R(e,t),e.prototype.componentDidMount=function(){this.startSubscription()},e.prototype.componentWillReceiveProps=function(t,e){if(!A(this.props.variables,t.variables)||this.client!==e.client||this.props.subscription!==t.subscription){var r=t.shouldResubscribe;"function"==typeof r&&(r=!!r(this.props,t));var n=!1===r;if(this.client!==e.client&&(this.client=e.client),!n)return this.endSubscription(),delete this.queryObservable,this.initialize(t),this.startSubscription(),void this.setState(this.getInitialState());this.initialize(t),this.startSubscription()}},e.prototype.componentWillUnmount=function(){this.endSubscription()},e.prototype.render=function(){var t=Object.assign({},this.state,{variables:this.props.variables});return this.props.children(t)},e.contextTypes={client:r.object.isRequired},e.propTypes={subscription:r.object.isRequired,variables:r.object,children:r.func.isRequired,shouldResubscribe:r.oneOfType([r.func,r.bool])},e}(e.Component),q=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),E=invariant_1$1,x=function(){return{}},N=function(){return!1};function W(t){return t.displayName||t.name||"Component"}function k(t,e,r,n){for(var o={},i=0,a=t.variables;i<a.length;i++){var c=a[i],u=c.variable,p=c.type;if(u.name&&u.name.value){var l=u.name.value,f=e[l];if(void 0===f)if("NonNullType"===p.kind){if(t.type===s.Mutation)return;E(void 0!==f,"The operation '"+t.name+"' wrapping '"+n+"' is expecting a variable: '"+u.name.value+"' but it was not found in the props passed to '"+r+"'")}else o[l]=null;else o[l]=f}}return o}var F=function(t){function e(e){var r=t.call(this,e)||this;return r.setWrappedInstance=r.setWrappedInstance.bind(r),r}return q(e,t),e.prototype.getWrappedInstance=function(){return E(this.withRef,"To access the wrapped instance, you need to specify { withRef: true } in the options"),this.wrappedInstance},e.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},e}(e.Component),L=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),I=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},$=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r},Q=hoistNonReactStatics,D=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),G=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},z=hoistNonReactStatics,U=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Y=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r},J=hoistNonReactStatics,V=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),X=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},K=invariant_1$1,B=hoistNonReactStatics,Z=flowRight_1;t.compose=Z,t.getDataFromTree=function t(e,r){void 0===r&&(r={});var n=function(t){var e=t.rootElement,r=t.rootContext,n=[];return o(e,void 0===r?{}:r,function(t,e,r,o){if(e&&function(t){return"function"==typeof t.fetchData}(e)){var i=e.fetchData();if(function(t){return"function"==typeof t.then}(i))return n.push({promise:i,context:o||r,instance:e}),!1}}),n}({rootElement:e,rootContext:r});if(!n.length)return Promise.resolve();var i=[],a=n.map(function(e){var r=e.promise,n=e.context,o=e.instance;return r.then(function(e){return t(o.render(),n)}).catch(function(t){return i.push(t)})});return Promise.all(a).then(function(t){if(i.length>0){var e=1===i.length?i[0]:new Error(i.length+" errors were thrown when executing your fetchData functions.");throw e.queryErrors=i,e}})},t.ApolloConsumer=a,t.ApolloProvider=l,t.Query=m,t.Mutation=T,t.Subscription=C,t.graphql=function(t,r){switch(void 0===r&&(r={}),h(t).type){case s.Mutation:return function(t,r){void 0===r&&(r={});var n=h(t),o=r.options,i=void 0===o?x:o,a=r.alias,s=void 0===a?"Apollo":a,c=i;return"function"!=typeof c&&(c=function(){return i}),function(o){var i=s+"("+W(o)+")",a=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return D(s,a),s.prototype.render=function(){var a=this.props,s=c(a);return r.withRef&&(this.withRef=!0,a=Object.assign({},a,{ref:this.setWrappedInstance})),!s.variables&&n.variables.length>0&&(s.variables=k(n,a,i,W(o))),e.createElement(T,G({},s,{mutation:t,ignoreResults:!0}),function(t,n){var i,s,c=r.name||"mutate",u=G(((i={})[c]=t,i),n||{});if(r.props){var p=((s={})[c]=t,s.ownProps=a,s);u=r.props(p)}return e.createElement(o,G({},a,u))})},s.displayName=i,s.WrappedComponent=o,s}(F);return z(a,o,{})}}(t,r);case s.Subscription:return function(t,r){void 0===r&&(r={});var n=h(t),o=r.options,i=void 0===o?x:o,a=r.skip,s=void 0===a?N:a,c=r.alias,u=void 0===c?"Apollo":c,p=r.shouldResubscribe,l=i;"function"!=typeof l&&(l=function(){return i});var f,y=s;return"function"!=typeof y&&(y=function(){return s}),function(o){var i=u+"("+W(o)+")",a=function(a){function s(t){var e=a.call(this,t)||this;return e.state={resubscribe:!1},e}return U(s,a),s.prototype.componentWillReceiveProps=function(t){p&&this.setState({resubscribe:p(this.props,t)})},s.prototype.render=function(){var a=this,s=this.props,c=y(s),u=c?Object.create(null):l(s);return!c&&!u.variables&&n.variables.length>0&&(u.variables=k(n,s,i,W(o))),e.createElement(C,H({},u,{displayName:i,skip:c,subscription:t,shouldResubscribe:this.state.resubscribe}),function(t){var n=t.data,i=Y(t,["data"]);if(r.withRef&&(a.withRef=!0,s=Object.assign({},s,{ref:a.setWrappedInstance})),c)return e.createElement(o,H({},s));var u,p,l=Object.assign(i,n||{}),y=r.name||"data",h=((u={})[y]=l,u);if(r.props){var b=((p={})[y]=l,p.ownProps=s,p);f=r.props(b,f),h=f}return e.createElement(o,H({},s,h))})},s.displayName=i,s.WrappedComponent=o,s}(F);return J(a,o,{})}}(t,r);case s.Query:default:return function(t,r){void 0===r&&(r={});var n=h(t),o=r.options,i=void 0===o?x:o,a=r.skip,s=void 0===a?N:a,c=r.alias,u=void 0===c?"Apollo":c,p=i;"function"!=typeof p&&(p=function(){return i});var l,f=s;return"function"!=typeof f&&(f=function(){return s}),function(o){var i=u+"("+W(o)+")",a=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return L(s,a),s.prototype.render=function(){var a=this,s=this.props,c=f(s),u=c?Object.create(null):p(s);return!c&&!u.variables&&n.variables.length>0&&(u.variables=k(n,s,i,W(o))),e.createElement(m,I({},u,{displayName:i,skip:c,query:t,warnUnhandledError:!0}),function(t){t.client;var n=t.data,i=$(t,["client","data"]);if(r.withRef&&(a.withRef=!0,s=Object.assign({},s,{ref:a.setWrappedInstance})),c)return e.createElement(o,I({},s));var u,p,f=Object.assign(i,n||{}),y=r.name||"data",h=((u={})[y]=f,u);if(r.props){var b=((p={})[y]=f,p.ownProps=s,p);l=r.props(b,l),h=l}return e.createElement(o,I({},s,h))})},s.displayName=i,s.WrappedComponent=o,s}(F);return Q(a,o,{})}}(t,r)}},t.withApollo=function(t,r){void 0===r&&(r={});var n="withApollo("+function(t){return t.displayName||t.name||"Component"}(t)+")",o=function(o){function i(t){var e=o.call(this,t)||this;return e.setWrappedInstance=e.setWrappedInstance.bind(e),e}return V(i,o),i.prototype.getWrappedInstance=function(){return K(r.withRef,"To access the wrapped instance, you need to specify { withRef: true } in the options"),this.wrappedInstance},i.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},i.prototype.render=function(){var n=this;return e.createElement(a,null,function(o){var i=Object.assign({},n.props,{client:o,ref:r.withRef?n.setWrappedInstance:void 0});return e.createElement(t,X({},i))})},i.displayName=n,i.WrappedComponent=t,i}(e.Component);return B(o,t,{})},t.walkTree=o,Object.defineProperty(t,"__esModule",{value:!0})}(e,require("react"),propTypes,require("apollo-client"))}),reactApollo_browser_umd$1=unwrapExports(reactApollo_browser_umd);exports.default=reactApollo_browser_umd$1;
